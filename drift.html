<!DOCTYPE html> 
<html> 
<head> 
   <title>NetTango (JS)</title>
   <meta name="apple-mobile-web-app-capable" content="yes" />
   <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
   <script type="text/javascript" src="blockly/blockly_compressed.js"></script>
   <script type="text/javascript" src="blockly/language/en/_messages.js"></script>
   
   <script type="text/javascript" src="language/language.js"></script>

   <script type="text/javascript" src="blockly/generators/javascript.js"></script>   
   <script type="text/javascript" src="language/generator.js"></script>
   
   
   
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />   
   <link rel="stylesheet" href="toolbar.css" />
   <link rel="stylesheet" href="drift.css" />

   
   <script type="text/javascript">
      function sendMessage() {
         window.postMessage('Testing 1, 2, 3', '/');
      }
      
      
      function endsWith(str, suffix) {
         return str.indexOf(suffix, str.length - suffix.length) !== -1;
      }      

      
      function compile() {
         var code = Blockly.Generator.workspaceToCode('JavaScript');
         
         // strip trailing comma
         if (endsWith(code, ', ')) {
           code = code.substring(0, code.length - 2);
         }
         window.postMessage("[ " + code + " ]", '/');
      }
      
      /*
      var messageHandler = function(event) {
         alert("Received " + event.data + event.origin);
      }
      
      window.addEventListener('message', messageHandler, false);
      */
   </script>
   
</head> 
<body>
   <canvas id="drift-patches" width="600" height="600"></canvas>
   <canvas id="drift-turtles" width="600" height="600"></canvas>

   
   <div id="drift-toolbar" class="toolbar">
      <div>
         <button id="restart-button">
         <button id="stepback-button" />
         <button id="rewind-button" />
         <button id="play-button" />
         <button id="fastforward-button" />
         <button id="stepforward-button" />
         <button id="fullscreen-button" />
      </div>
      <input type="range" id="ticker" min="0" max="1000" step="1" value="0" />
      <div id="tick-count">tick: 0</div>
   </div>
   
    
   <xml id="toolbox" style="display: none">
      <block type="forward"></block>
      <block type="backward"></block>
   </xml>
   
   <div id="drift-plot"></div>
   <!--
      <script type="text/javascript">
         Blockly.inject(document.getElementById('tabs'),
                        {path: './blockly/', toolbox: document.getElementById('toolbox')});
      </script>
   -->
    
   <!-- home button -->
   <button id="home-button" class="tool-button" onclick="compile();" />
   
   <!-- code button -->
   <button id="code-button" class="tool-button" />
   
   <!-- settings button -->
   <button id="settings-button" class="tool-button" onclick="showSettings();" />
   
    <script src="drift.dart" type="application/dart"></script>
    <script src="dart.js"></script>
</body>
</html>